(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f8beedf"],{"0feb":function(t,e,c){"use strict";c("a434"),c("a4d3"),c("e01a");var l=c("7a23"),o={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},n={class:"modal-dialog modal-xl",role:"document"},a={class:"modal-content border-0"},i={class:"modal-header bg-dark text-white"},r={class:"modal-title",id:"exampleModalLabel"},s={key:0},d={key:1},u=Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),b={class:"modal-body"},p={class:"row"},h={class:"col-sm-4"},m={class:"mb-3"},f=Object(l["h"])("label",{for:"image",class:"form-label"},"輸入圖片網址",-1),O={class:"mb-3"},j={for:"customFile",class:"form-label"},g=Object(l["g"])("或 上傳圖片 "),v={key:0,class:"spinner-border spinner-border-sm",role:"status"},y=Object(l["h"])("span",{class:"visually-hidden"},"Loading...",-1),P={key:0,class:"mt-5"},x={key:0},U={class:"col-sm-8"},k={class:"mb-3"},w=Object(l["h"])("label",{for:"title",class:"form-label"},"標題",-1),I={class:"row gx-2"},S={class:"mb-3 col-md-6"},C=Object(l["h"])("label",{for:"category",class:"form-label"},"分類",-1),_={class:"mb-3 col-md-6"},N=Object(l["h"])("label",{for:"price",class:"form-label"},"單位",-1),A={class:"row gx-2"},$={class:"mb-3 col-md-6"},M=Object(l["h"])("label",{for:"origin_price",class:"form-label"},"原價",-1),V={class:"mb-3 col-md-6"},L=Object(l["h"])("label",{for:"price",class:"form-label"},"售價",-1),D={class:"row gx-2"},E={class:"mb-3 col-md-6"},T=Object(l["h"])("label",{for:"sell_status",class:"form-label"},"銷售狀態",-1),R=Object(l["h"])("option",{value:"",selected:""},"無",-1),F={class:"mb-3 col-md-6"},B=Object(l["h"])("label",{for:"score",class:"form-label"},"評價",-1),J=Object(l["h"])("hr",null,null,-1),q={class:"mb-3"},z=Object(l["h"])("label",{for:"description",class:"form-label"},"產品描述",-1),G={class:"mb-3"},H=Object(l["h"])("label",{for:"content",class:"form-label"},"說明內容",-1),Y={class:"mb-3"},K={class:"form-check"},Q=Object(l["h"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),W={class:"modal-footer"},X=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Z(t,e,c,Z,tt,et){return Object(l["t"])(),Object(l["e"])("div",o,[Object(l["h"])("div",n,[Object(l["h"])("div",a,[Object(l["h"])("div",i,[Object(l["h"])("h5",r,[c.isNew?(Object(l["t"])(),Object(l["e"])("span",s,"新增產品")):(Object(l["t"])(),Object(l["e"])("span",d,"編輯產品"))]),u]),Object(l["h"])("div",b,[Object(l["h"])("div",p,[Object(l["h"])("div",h,[Object(l["h"])("div",m,[f,Object(l["N"])(Object(l["h"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":e[1]||(e[1]=function(t){return tt.tempProduct.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[l["I"],tt.tempProduct.imageUrl]])]),Object(l["h"])("div",O,[Object(l["h"])("label",j,[g,tt.status.fileUploading?(Object(l["t"])(),Object(l["e"])("div",v,[y])):Object(l["f"])("",!0)]),Object(l["h"])("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[2]||(e[2]=function(){return et.uploadFile&&et.uploadFile.apply(et,arguments)})},null,544)]),Object(l["h"])("img",{class:"img-fluid",src:tt.tempProduct.imageUrl},null,8,["src"]),tt.tempProduct.imagesUrl?(Object(l["t"])(),Object(l["e"])("div",P,[(Object(l["t"])(!0),Object(l["e"])(l["a"],null,Object(l["y"])(tt.tempProduct.imagesUrl,(function(t,e){return Object(l["t"])(),Object(l["e"])("div",{class:"mb-3",key:e},[Object(l["N"])(Object(l["h"])("input",{type:"url",class:"form-control form-control","onUpdate:modelValue":function(t){return tt.tempProduct.imagesUrl[e]=t},placeholder:"請輸入連結"},null,8,["onUpdate:modelValue"]),[[l["I"],tt.tempProduct.imagesUrl[e]]]),Object(l["h"])("div",null,[Object(l["h"])("img",{class:"img-fluid",src:t},null,8,["src"])]),Object(l["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return tt.tempProduct.imagesUrl.splice(e,1)}}," 移除 ",8,["onClick"])])})),128)),tt.tempProduct.imagesUrl[tt.tempProduct.imagesUrl.length-1]||!tt.tempProduct.imagesUrl.length?(Object(l["t"])(),Object(l["e"])("div",x,[Object(l["h"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(t){return tt.tempProduct.imagesUrl.push("")})}," 新增圖片 ")])):Object(l["f"])("",!0)])):Object(l["f"])("",!0)]),Object(l["h"])("div",U,[Object(l["h"])("div",k,[w,Object(l["N"])(Object(l["h"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[4]||(e[4]=function(t){return tt.tempProduct.title=t}),placeholder:"請輸入標題"},null,512),[[l["I"],tt.tempProduct.title]])]),Object(l["h"])("div",I,[Object(l["h"])("div",S,[C,Object(l["N"])(Object(l["h"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":e[5]||(e[5]=function(t){return tt.tempProduct.category=t}),placeholder:"請輸入分類"},null,512),[[l["I"],tt.tempProduct.category]])]),Object(l["h"])("div",_,[N,Object(l["N"])(Object(l["h"])("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":e[6]||(e[6]=function(t){return tt.tempProduct.unit=t}),placeholder:"請輸入單位"},null,512),[[l["I"],tt.tempProduct.unit]])])]),Object(l["h"])("div",A,[Object(l["h"])("div",$,[M,Object(l["N"])(Object(l["h"])("input",{type:"number",class:"form-control",id:"origin_price",min:"0","onUpdate:modelValue":e[7]||(e[7]=function(t){return tt.tempProduct.origin_price=t}),placeholder:"請輸入原價"},null,512),[[l["I"],tt.tempProduct.origin_price,void 0,{number:!0}]])]),Object(l["h"])("div",V,[L,Object(l["N"])(Object(l["h"])("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":e[8]||(e[8]=function(t){return tt.tempProduct.price=t}),min:"0",placeholder:"請輸入售價"},null,512),[[l["I"],tt.tempProduct.price,void 0,{number:!0}]])])]),Object(l["h"])("div",D,[Object(l["h"])("div",E,[T,Object(l["N"])(Object(l["h"])("select",{id:"sell_status",class:"form-select","aria-label":"Default select option","onUpdate:modelValue":e[9]||(e[9]=function(t){return tt.tempProduct.options.sell_status=t})},[R,(Object(l["t"])(!0),Object(l["e"])(l["a"],null,Object(l["y"])(c.sellStatusOptions,(function(t){return Object(l["t"])(),Object(l["e"])("option",{value:t,key:t},Object(l["D"])(t),9,["value"])})),128))],512),[[l["H"],tt.tempProduct.options.sell_status]])]),Object(l["h"])("div",F,[B,Object(l["N"])(Object(l["h"])("input",{id:"score",type:"number",min:"0",class:"form-control",placeholder:"請輸入評價","onUpdate:modelValue":e[10]||(e[10]=function(t){return tt.tempProduct.options.score=t})},null,512),[[l["I"],tt.tempProduct.options.score,void 0,{number:!0}]])])]),J,Object(l["h"])("div",q,[z,Object(l["N"])(Object(l["h"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[11]||(e[11]=function(t){return tt.tempProduct.description=t}),placeholder:"請輸入產品描述"},null,512),[[l["I"],tt.tempProduct.description]])]),Object(l["h"])("div",G,[H,Object(l["N"])(Object(l["h"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":e[12]||(e[12]=function(t){return tt.tempProduct.content=t}),placeholder:"請輸入產品說明內容"},null,512),[[l["I"],tt.tempProduct.content]])]),Object(l["h"])("div",Y,[Object(l["h"])("div",K,[Object(l["N"])(Object(l["h"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=function(t){return tt.tempProduct.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[l["G"],tt.tempProduct.is_enabled]]),Q])])])])]),Object(l["h"])("div",W,[X,Object(l["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[14]||(e[14]=function(e){return t.$emit("update-product",tt.tempProduct)})}," 確認 ")])])])],512)}c("99af");var tt=c("e0ae"),et={props:{product:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1},sellStatusOptions:{type:Array,default:function(){return[]}}},data:function(){return{status:{},modal:"",tempProduct:{options:{}}}},emits:["update-product"],mixins:[tt["a"]],inject:["emitter"],watch:{product:function(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl=""),this.tempProduct.options||(this.tempProduct.options={sell_status:""})}},methods:{uploadFile:function(){var t=this,e=this.$refs.fileInput.files[0],c=new FormData;c.append("file-to-upload",e);var l="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/admin/upload");this.status.fileUploading=!0,this.$http.post(l,c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.status.fileUploading=!1,e.data.success?(t.tempProduct.imageUrl=e.data.imageUrl,t.$refs.fileInput.value="",t.emitter.emit("push-message",{style:"success",title:"圖片上傳結果",content:e.data.message})):(t.$refs.fileInput.value="",t.emitter.emit("push-message",{style:"danger",title:"圖片上傳結果",content:e.data.message}))}))}}};et.render=Z;e["a"]=et},1276:function(t,e,c){"use strict";var l=c("d784"),o=c("44e7"),n=c("825a"),a=c("1d80"),i=c("4840"),r=c("8aa5"),s=c("50c4"),d=c("14c3"),u=c("9263"),b=c("9f7f"),p=b.UNSUPPORTED_Y,h=[].push,m=Math.min,f=4294967295;l("split",2,(function(t,e,c){var l;return l="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,c){var l=String(a(this)),n=void 0===c?f:c>>>0;if(0===n)return[];if(void 0===t)return[l];if(!o(t))return e.call(l,t,n);var i,r,s,d=[],b=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,b+"g");while(i=u.call(m,l)){if(r=m.lastIndex,r>p&&(d.push(l.slice(p,i.index)),i.length>1&&i.index<l.length&&h.apply(d,i.slice(1)),s=i[0].length,p=r,d.length>=n))break;m.lastIndex===i.index&&m.lastIndex++}return p===l.length?!s&&m.test("")||d.push(""):d.push(l.slice(p)),d.length>n?d.slice(0,n):d}:"0".split(void 0,0).length?function(t,c){return void 0===t&&0===c?[]:e.call(this,t,c)}:e,[function(e,c){var o=a(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,o,c):l.call(String(o),e,c)},function(t,o){var a=c(l,t,this,o,l!==e);if(a.done)return a.value;var u=n(t),b=String(this),h=i(u,RegExp),O=u.unicode,j=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"g":"y"),g=new h(p?"^(?:"+u.source+")":u,j),v=void 0===o?f:o>>>0;if(0===v)return[];if(0===b.length)return null===d(g,b)?[b]:[];var y=0,P=0,x=[];while(P<b.length){g.lastIndex=p?0:P;var U,k=d(g,p?b.slice(P):b);if(null===k||(U=m(s(g.lastIndex+(p?P:0)),b.length))===y)P=r(b,P,O);else{if(x.push(b.slice(y,P)),x.length===v)return x;for(var w=1;w<=k.length-1;w++)if(x.push(k[w]),x.length===v)return x;P=y=U}}return x.push(b.slice(y)),x}]}),p)},"25f0":function(t,e,c){"use strict";var l=c("6eeb"),o=c("825a"),n=c("d039"),a=c("ad6d"),i="toString",r=RegExp.prototype,s=r[i],d=n((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),u=s.name!=i;(d||u)&&l(RegExp.prototype,i,(function(){var t=o(this),e=String(t.source),c=t.flags,l=String(void 0===c&&t instanceof RegExp&&!("flags"in r)?a.call(t):c);return"/"+e+"/"+l}),{unsafe:!0})},"44e7":function(t,e,c){var l=c("861d"),o=c("c6b6"),n=c("b622"),a=n("match");t.exports=function(t){var e;return l(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==o(t))}},a434:function(t,e,c){"use strict";var l=c("23e7"),o=c("23cb"),n=c("a691"),a=c("50c4"),i=c("7b0b"),r=c("65f0"),s=c("8418"),d=c("1dde"),u=d("splice"),b=Math.max,p=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var c,l,d,u,f,O,j=i(this),g=a(j.length),v=o(t,g),y=arguments.length;if(0===y?c=l=0:1===y?(c=0,l=g-v):(c=y-2,l=p(b(n(e),0),g-v)),g+c-l>h)throw TypeError(m);for(d=r(j,l),u=0;u<l;u++)f=v+u,f in j&&s(d,u,j[f]);if(d.length=l,c<l){for(u=v;u<g-l;u++)f=u+l,O=u+c,f in j?j[O]=j[f]:delete j[O];for(u=g;u>g-l+c;u--)delete j[u-1]}else if(c>l)for(u=g-l;u>v;u--)f=u+l-1,O=u+c-1,f in j?j[O]=j[f]:delete j[O];for(u=0;u<c;u++)j[u+v]=arguments[u+2];return j.length=g-l+c,d}})},e01a:function(t,e,c){"use strict";var l=c("23e7"),o=c("83ab"),n=c("da84"),a=c("5135"),i=c("861d"),r=c("9bf2").f,s=c("e893"),d=n.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};s(b,d);var p=b.prototype=d.prototype;p.constructor=b;var h=p.toString,m="Symbol(test)"==String(d("test")),f=/^Symbol\((.*)\)[^)]+$/;r(p,"description",{configurable:!0,get:function(){var t=i(this)?this.valueOf():this,e=h.call(t);if(a(u,t))return"";var c=m?e.slice(7,-1):e.replace(f,"$1");return""===c?void 0:c}}),l({global:!0,forced:!0},{Symbol:b})}},e6dc:function(t,e,c){"use strict";c.r(e);var l=c("7a23"),o={class:"container"},n=Object(l["h"])("h1",null,"產品列表",-1),a={class:"mt-4"},i={class:"table align-middle"},r=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",null,"圖片"),Object(l["h"])("th",null,"商品名稱"),Object(l["h"])("th",null,"價格"),Object(l["h"])("th")])],-1),s={style:{width:"200px"}},d={key:0,class:"h5"},u={key:1,class:"h6"},b={key:2,class:"h5"},p={class:"btn-group btn-group-sm"};function h(t,e,c,h,m,f){var O=Object(l["A"])("Loading"),j=Object(l["A"])("ProductModal");return Object(l["t"])(),Object(l["e"])(l["a"],null,[Object(l["h"])("div",o,[n,Object(l["h"])("div",a,[Object(l["h"])("table",i,[r,Object(l["h"])("tbody",null,[(Object(l["t"])(!0),Object(l["e"])(l["a"],null,Object(l["y"])(m.products,(function(t){return Object(l["t"])(),Object(l["e"])("tr",{key:t.id},[Object(l["h"])("td",s,[t.imageUrl?(Object(l["t"])(),Object(l["e"])("div",{key:0,style:[{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(t.imageUrl,")")}]},null,4)):Object(l["f"])("",!0)]),Object(l["h"])("td",null,Object(l["D"])(t.title),1),Object(l["h"])("td",null,[t.price?Object(l["f"])("",!0):(Object(l["t"])(),Object(l["e"])("div",d,Object(l["D"])(t.origin_price)+" 元",1)),t.price?(Object(l["t"])(),Object(l["e"])("del",u,"原價 "+Object(l["D"])(f.toThousand(t.origin_price))+" 元",1)):Object(l["f"])("",!0),t.price?(Object(l["t"])(),Object(l["e"])("div",b,"現在只要 "+Object(l["D"])(f.toThousand(t.price))+" 元",1)):Object(l["f"])("",!0)]),Object(l["h"])("td",null,[Object(l["h"])("div",p,[Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return f.pushProductPage(t)},disabled:m.loadingStatus.loadingItem===t.id||!t.is_enabled}," 查看更多 ",8,["onClick","disabled"]),Object(l["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return f.addCart(t.id)},disabled:m.loadingStatus.loadingItem===t.id||!t.is_enabled}," 加到購物車 ",8,["onClick","disabled"])])])])})),128))])])])]),Object(l["h"])(O,{active:m.isLoading},null,8,["active"]),Object(l["h"])(j,{ref:"productModalA",product:m.product,onAddToCart:f.addCart},null,8,["product","onAddToCart"])],64)}c("99af"),c("ac1f"),c("1276"),c("d3b7"),c("25f0"),c("5319"),c("a15b");var m=c("0feb"),f={data:function(){return{products:[],product:{},isLoading:!1,loadingStatus:{loadingItem:""}}},components:{ProductModal:m["a"]},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/products?page=").concat(e);this.$http.get(c).then((function(e){e.data.success?t.products=e.data.products:t.errorAlert(e.data.message),t.isLoading=!1})).catch((function(t){console.dir(t)}))},pushProductPage:function(t){this.$router.push("/product/".concat(t.id))},openProductModal:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/product/").concat(t.id);this.$http.get(c).then((function(t){t.data.success?(e.product=t.data.product,e.$refs.productModalA.openModal()):e.errorAlert(t.data.message)})).catch((function(t){console.dir(t)}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0,this.loadingStatus.loadingItem=t;var l={product_id:t,qty:c},o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart");this.$http.post(o,{data:l}).then((function(t){t.data.success?(e.isLoading=!1,e.loadingStatus.loadingItem="",e.successAlert(t.data.message)):e.errorAlert(t.data.message)})).catch((function(t){console.dir(t)}))},toThousand:function(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")},successAlert:function(t){this.$swal.fire({icon:"success",title:t,showConfirmButton:!1,timer:1500})},errorAlert:function(t){this.$swal.fire({icon:"error",title:"Oops...",text:t})}},created:function(){this.getProducts()}};f.render=h;e["default"]=f}}]);
//# sourceMappingURL=chunk-4f8beedf.6b0780c9.js.map